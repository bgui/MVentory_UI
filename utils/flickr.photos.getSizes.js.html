<!DOCTYPE html>
<head>
<!-- THIS IS JUST QUICK SNIPPET TO GET IMAGE SIZES FROM FLICKR -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://welovebooks.co.nz/js/magenthemes/mt_dend/js/jquery.mtlib.js"></script>

<link rel="stylesheet" type="text/css" href="http://welovebooks.co.nz/js/camera/styles.css" />
<script type="text/javascript" src="http://welovebooks.co.nz/js/camera/camera.min.js"></script>

</head>
<body>

<div id="slides" class="camera_wrap" style="display: block; height: 281px; width:410px;" ></div>


<script type="text/javascript">// <![CDATA[


var API_KEY = "7372f9055f3f8555be03b8435f974ad0";

var $slides = $('#slides');

             
$.ajax({type: "GET",url: "https://api.flickr.com/services/rest/?jsoncallback=?",
                dataType: "json",
                async: false,
                data: {
                      method: "flickr.photosets.getPhotos",
                      api_key: API_KEY,
                      photoset_id: "72157645507184622",
                      extras: "url_o",
                      format: "json"
                },
      })
      .done(function(data){             
                photos = data.photoset.photo;
                jQuery.each(photos, function(i,_photo) {
                      
                        getFlickrFotoByPhotoId( _photo.id, $slides.width() );
                });
      });
  
              
jQuery(window).load(function(){
    
        $slides.camera({
          alignmen: 'topCenter',
          height: '36.34%',
          minHeight: '281px',
          loader : false,
          pagination: false,
          fx: 'simpleFade',
          navigationHover:false,
          navigation: true,
          thumbnails: false,
          playPause: false
        });
});
             
              



/**
* Call flickr api and get me a url of a smaller image
* based on a photo id and current slider dimension. Some images are big
* and we want a quick load time.
*
* @param approtimateWidth integer of slider width
* 
*/
function getFlickrFotoByPhotoId(fotoId, approximateWidth){
          
          
          jQuery.ajax({type: "GET",url: "https://api.flickr.com/services/rest/?jsoncallback=?",
                  dataType: "json",
                  async: false,
                  data: {
                        method: "flickr.photos.getSizes",
                        api_key: API_KEY,
                        photo_id: fotoId ,
                        format: "json"
                      }
                })
                .done(function(data){
                        var url = "";
                        console.log(data);
                        jQuery.each(data.sizes.size,function(i,size){
                            if(!size){
                              return false;
                            }
                            
                            if(approximateWidth <= 500 ){
                               if(size.label == "Medium") {
                                  url = size.source;
                                  return false;
                               }
                            }else{
                               if(size.label == "Medium 800"){
                                  url = size.source;
                                  return false;
                               }
                            }
                        });
                        
                        /// do something with $url !! 
                        console.log(url);
                        jQuery('<div>', { 'data-src': url }).appendTo($slides);
                });
}



// ]]></script>

</body>
</html>